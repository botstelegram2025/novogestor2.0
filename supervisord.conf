; supervisord.conf
[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0

; Servidor Baileys (Node) deve ouvir na porta que o Railway injeta ($PORT)
[program:wa_server]
directory=/app
command=node wa_server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=PORT="%(ENV_PORT)s"

; Bot (Python) consome a API local do Node via 127.0.0.1:$PORT
[program:telegram_bot]
directory=/app
command=python bot_complete.py
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=WA_API_BASE="http://127.0.0.1:%(ENV_PORT)s"
